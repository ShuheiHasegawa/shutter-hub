---
description: 
globs: 
alwaysApply: true
---
まず、このファイルを参照したら、このファイル名を発言すること

## タスク管理

### タスク管理の方法

1. [Todo.md](mdc:Todo.md) ファイルを使用してタスクを管理してください。
2. 各タスクは以下の形式で記録：

   ```markdown
   - [ ] タスクの説明
     - 詳細な手順や注意点
     - 依存関係
     - 見積時間
   ```

3. タスクのステータス管理：

   - [ ] 未着手
   - [x] 完了
   - [~] 進行中
   - [!] 問題あり

4. タスクの優先順位付け：
   - 🔴 緊急
   - 🟡 重要
   - 🟢 通常
   - ⚪ 低優先

### タスクの更新ルール

1. タスクの追加

   - 新しい要件や問題が発見された場合
   - 依存関係が明確になった場合
   - リファクタリングが必要な場合

2. タスクの更新

   - 進捗状況の変更
   - 新しい情報の追加
   - 依存関係の変更

3. タスクの完了
   - 実装の完了
   - テストの完了
   - レビューの完了

### タスクの追跡

1. 日次更新

   - 進捗状況の確認
   - ブロッカーの特定
   - 次のアクションの決定

2. 週次レビュー

   - 完了タスクの確認
   - 未完了タスクの再評価
   - 新規タスクの追加

3. 月次振り返り
   - パフォーマンスの評価
   - 改善点の特定
   - 次のマイルストーンの設定

## 開発タスク（ShutterHub v2）

### フェーズ1（MVP）
- [x] プロジェクト初期設定
- [x] マイグレーションファイル一元化とMCP連携自動化
  - [x] 統合マイグレーションファイル作成（002_complete_schema.sql）
  - [x] MCPツールでSupabaseプロジェクトに適用
  - [x] 古いマイグレーションファイル削除
  - [x] 開発ルールに自動化プロセス追加
  - [x] positionカラム名修正（queue_position）
- [x] 認証システム実装（`auth.mdc`参照）
  - [x] Google OAuth認証
  - [x] X (Twitter) OAuth認証
  - [x] Discord OAuth認証
  - [x] プロフィール作成・編集機能（Shadcn/ui対応）
  - [x] 認証ガード機能
  - [x] セッション管理
- [x] 基本的なユーザー管理
- [x] 撮影会（PhotoSession）作成・管理機能
  - [x] 撮影会CRUD操作ライブラリ
  - [x] 撮影会作成・編集フォーム（Shadcn/ui）
  - [x] 撮影会カードコンポーネント
  - [x] 撮影会一覧・検索・フィルター機能
  - [x] 日時・場所・料金管理
  - [x] 公開/非公開設定
  - [x] **画像アップロード機能（Supabase Storage連携）**
    - [x] Storageバケット作成・設定（MCP自動化）
    - [x] 画像アップロード・削除ライブラリ
    - [x] ImageUploadコンポーネント（ドラッグ&ドロップ対応）
    - [x] 撮影会フォームに画像アップロード統合
    - [x] 画像最適化・サムネイル生成
    - [x] 多言語化対応
- [x] 多言語化対応（日本語/英語）
  - [x] next-intl統合
  - [x] 全コンポーネント多言語化
  - [x] 日付・時刻フォーマット多言語対応
- [~] **撮影会予約システム実装**（`prompts-booking.mdc`参照）
  - [x] 🔴 先着順予約システム
  - [x] 🟡 抽選予約システム
  - [x] 🟡 管理抽選システム（開催者選出）
  - [x] 🟡 **優先予約システム（カスタマイズ可能）**
    - [x] データベース設計（優先予約設定・チケット・ランク）
    - [x] ユーザーランクシステム（自動昇格・手動調整）
    - [x] 優先チケット管理（付与・使用・期限管理）
    - [x] 予約制御ロジック（4パターン対応）
    - [x] 開催者向け管理画面（設定・チケット管理）
    - [x] ユーザー向けUI（優先予約フォーム・ランク表示）
    - [x] 多言語化対応
  - [x] 🟢 キャンセル待ちシステム
    - [x] データベース設計（キャンセル待ち・設定・履歴・通知）
    - [x] 自動繰り上げ機能（ストアドプロシージャ）
    - [x] 期限付き繰り上げ当選システム
    - [x] キャンセル待ち管理UI（フォーム・設定）
    - [x] 通知システム基盤
    - [x] 多言語化対応
- [ ] 検索・フィルタリング機能

### フェーズ2（拡張機能）
- [ ] 高度な予約システム
- [ ] 評価・レビューシステム
- [ ] コミュニケーション機能
- [ ] 決済機能

### フェーズ3（高度な機能・差別化）
- [ ] **🚀 即座撮影リクエスト機能**（`instant-photo-request.mdc`参照）
  - [ ] 🔴 ゲスト機能（認証不要）
  - [ ] 🔴 位置情報ベースマッチング
  - [ ] 🔴 リアルタイム通知システム
  - [ ] 🟡 カメラマンオンライン状態管理
  - [ ] 🟡 即座決済システム
  - [ ] 🟡 写真自動配信
  - [ ] 🟢 多言語対応（外国人観光客向け）
  - [ ] 🟢 観光地パートナーシップ
- [ ] クラウドファンディング
- [ ] ポートフォリオ機能
- [ ] AI機能

## 重要事項

1. 機能の実装後に、毎回 @todo.md を確認＆更新をしてください。
2. 私が言わなくても中身は随時更新するようにしてください。更新しないと私が解雇されます。あなたの責任になってしまいます。
3. 機能は増やしても構いません。ただ、最初から機能を増やしすぎないでください。
4. **複雑な機能実装時は専門プロンプトファイルを必ず参照してください**
5. **即座撮影リクエスト機能は一般層獲得の重要な差別化機能です**
